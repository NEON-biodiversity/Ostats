<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate O-statistics (community-level pairwise niche overlap statistics) — Ostats • Ostats</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate O-statistics (community-level pairwise niche overlap statistics) — Ostats" />
<meta property="og:description" content="This is the primary function in the Ostats package. It evaluates the
O-statistics against a local null model." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Ostats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate O-statistics (community-level pairwise niche overlap statistics)</h1>
    
    <div class="hidden name"><code>Ostats.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is the primary function in the Ostats package. It evaluates the
O-statistics against a local null model.</p>
    </div>

    <pre class="usage"><span class='fu'>Ostats</span><span class='op'>(</span>
  <span class='va'>traits</span>,
  <span class='va'>plots</span>,
  <span class='va'>sp</span>,
  data_type <span class='op'>=</span> <span class='st'>"linear"</span>,
  output <span class='op'>=</span> <span class='st'>"median"</span>,
  weight_type <span class='op'>=</span> <span class='st'>"hmean"</span>,
  run_null_model <span class='op'>=</span> <span class='cn'>TRUE</span>,
  nperm <span class='op'>=</span> <span class='fl'>99</span>,
  nullqs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.025</span>, <span class='fl'>0.975</span><span class='op'>)</span>,
  shuffle_weights <span class='op'>=</span> <span class='cn'>FALSE</span>,
  swap_means <span class='op'>=</span> <span class='cn'>FALSE</span>,
  random_seed <span class='op'>=</span> <span class='cn'>NULL</span>,
  unique_values <span class='op'>=</span> <span class='cn'>NULL</span>,
  circular_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  density_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>traits</th>
      <td><p>a vector or matrix of trait measurements. The number of elements
in the vector or number of rows in the matrix is the number of individuals,
and the number of columns of the matrix is the number of traits.</p></td>
    </tr>
    <tr>
      <th>plots</th>
      <td><p>a factor with length equal to nrow(traits) that indicates the
community each individual belongs to.</p></td>
    </tr>
    <tr>
      <th>sp</th>
      <td><p>a factor with length equal to nrow(traits) that indicates the taxon
of each individual.</p></td>
    </tr>
    <tr>
      <th>data_type</th>
      <td><p>data type can be "linear", "circular",or "circular_discrete".
Defaults to "linear".</p></td>
    </tr>
    <tr>
      <th>output</th>
      <td><p>specifies whether median or mean is calculated.</p></td>
    </tr>
    <tr>
      <th>weight_type</th>
      <td><p>specifies weights to be used to calculate the median or mean.</p></td>
    </tr>
    <tr>
      <th>run_null_model</th>
      <td><p>whether to run a null model (if <code>TRUE</code>) and evaluate the
O-statistics against it, or simply return the raw O-statistics (if <code>FALSE</code>).
Defaults to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>nperm</th>
      <td><p>the number of null model permutations to generate. Defaults to 99.</p></td>
    </tr>
    <tr>
      <th>nullqs</th>
      <td><p>numeric vector of probabilities with values in [0,1] to set
effect size quantiles. Defaults to <code><a href='https://rdrr.io/r/base/c.html'>c(0.025, 0.975)</a></code>.</p></td>
    </tr>
    <tr>
      <th>shuffle_weights</th>
      <td><p>If <code>TRUE</code>, shuffle weights given to pairwise overlaps
within a community when generating null models.</p></td>
    </tr>
    <tr>
      <th>swap_means</th>
      <td><p>If <code>TRUE</code>, swap means of body sizes within a community when
generating null models.</p></td>
    </tr>
    <tr>
      <th>random_seed</th>
      <td><p>User may supply a random seed to enable reproducibility
of null model output. A warning is issued, and a random seed is generated
based on the local time, if the user does not supply a seed.</p></td>
    </tr>
    <tr>
      <th>unique_values</th>
      <td><p>Vector of all possible discrete values that <code>traits</code>
can take. Only used if <code>data_type</code> is "circular_discrete".</p></td>
    </tr>
    <tr>
      <th>circular_args</th>
      <td><p>optional list of additional arguments to pass to
<code><a href='https://rdrr.io/pkg/circular/man/circular.html'>circular</a></code>. Only used if the data type is "circular".
Note that continuous circular data must be provided in radian units.</p></td>
    </tr>
    <tr>
      <th>density_args</th>
      <td><p>additional arguments to pass to <code><a href='https://rdrr.io/r/stats/density.html'>density</a></code>, such as
<code>bw</code>, <code>n</code>, or <code>adjust</code>. If none are provided, default values
are used.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns a list containing 4 objects:</p>
<dt>overlaps_norm</dt><dd><p>a matrix showing the median of weighted pairwise overlaps (at default) of trait
  distributions of all species in each community (at default output
  and weight_type), with the area under all density functions normalized to 1.</p></dd>
<dt>overlaps_unnorm</dt><dd><p>a matrix showing O-stats calculated with the area under all density
  functions proportional to the number of observations in that group.</p></dd>
<dt>overlaps_norm_ses</dt><dd><p>5 matrices of effect size statistics against a null model
  with the area under all density functions normalized to 1.</p></dd>
<dt>overlaps_unnorm_ses</dt><dd><p>5 matrices of effect size statistics against a null model
  with the area under all density functions proportional to the number
  of observations in that group.</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function evaluates the overlap statistics against a local null
  model. By default, it calculates the median of pairwise
  overlaps, weighted by harmonic mean of species abundaces of the species
  pairs in each community. Two results are produced, one normalizing the area
  under all density functions to 1, the other making the area under all density
  functions proportional to the number of observations in that group.</p>
<p>When both shuffle_weights and swap_means are FALSE, null models are
  generated by randomly assigning a taxon that is present in the community to
  each individual. O-stats are then calculated to be compared against.</p>
<p>Effect size statistics are calculated between the observed O-stats
  and the null model.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Read, Q. D. et al. Among-species overlap in rodent body size
  distributions predicts species richness along a temperature gradient.
  Ecography 41, 1718-1727 (2018).</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='Ostats_multivariate.html'>Ostats_multivariate</a></code> for multidimensional overlap.</p>
<p><code><a href='Ostats_plot.html'>Ostats_plot</a></code> for plotting community overlap for
each community.
#'</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Quentin D. Read, John M. Grady, Arya Y. Yue, Isadora Fluck E., Ben Baiser,
Angela Strecker, Phoebe L. Zarnetske, and Sydne Record</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># overlap statistics for body weights of small mammals in NEON sites</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>Ostats</span><span class='op'>)</span>

<span class='co'># Keep only the relevant part of data</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>small_mammal_data</span><span class='op'>[</span><span class='va'>small_mammal_data</span><span class='op'>$</span><span class='va'>siteID</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'HARV'</span>,<span class='st'>'JORN'</span><span class='op'>)</span>, <span class='op'>]</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>dat</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>weight</span><span class='op'>)</span>, <span class='op'>]</span>
<span class='va'>dat</span><span class='op'>$</span><span class='va'>log_weight</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log10</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>weight</span><span class='op'>)</span>


<span class='co'>#Run O-stats on the data with only a few null model iterations</span>
<span class='va'>Ostats_example</span> <span class='op'>&lt;-</span> <span class='fu'>Ostats</span><span class='op'>(</span>traits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>[</span>,<span class='st'>'log_weight'</span><span class='op'>]</span><span class='op'>)</span>,
                   sp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>taxonID</span><span class='op'>)</span>, data_type <span class='op'>=</span> <span class='st'>"linear"</span>,
                   plots <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>siteID</span><span class='op'>)</span>,
                   nperm <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Quentin D. Read, Arya Yue, Isadora E. Fluck, Benjamin Baiser, John M. Grady, Phoebe L. Zarnetske, Sydne Record.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


