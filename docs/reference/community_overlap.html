<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Community Overlap Calculation — community_overlap • Ostats</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Community Overlap Calculation — community_overlap" />
<meta property="og:description" content="This function calculates the median or mean of pairwise overlaps between density
estimates of trait distributions of all species within a community, which can
be weighted by species abundances." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Ostats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Ostats-introduction.html">O-stats: pairwise community-level niche overlap statistics</a>
    </li>
    <li>
      <a href="../articles/Ostats-multivariate.html">Multivariate O-statistics</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Community Overlap Calculation</h1>
    
    <div class="hidden name"><code>community_overlap.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function calculates the median or mean of pairwise overlaps between density
estimates of trait distributions of all species within a community, which can
be weighted by species abundances.</p>
    </div>

    <pre class="usage"><span class='fu'>community_overlap</span><span class='op'>(</span>
  <span class='va'>traits</span>,
  <span class='va'>sp</span>,
  discrete <span class='op'>=</span> <span class='cn'>FALSE</span>,
  circular <span class='op'>=</span> <span class='cn'>FALSE</span>,
  normal <span class='op'>=</span> <span class='cn'>TRUE</span>,
  output <span class='op'>=</span> <span class='st'>"median"</span>,
  weight_type <span class='op'>=</span> <span class='st'>"hmean"</span>,
  randomize_weights <span class='op'>=</span> <span class='cn'>FALSE</span>,
  unique_values <span class='op'>=</span> <span class='cn'>NULL</span>,
  circular_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  density_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  hypervolume_set_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>traits</th>
      <td><p>a vector of trait measurements in the univariate case, or a
matrix in the multivariate case where each column is a trait.</p></td>
    </tr>
    <tr>
      <th>sp</th>
      <td><p>a vector with length equal to length(traits) that indicates the
taxon of each individual.</p></td>
    </tr>
    <tr>
      <th>discrete</th>
      <td><p>whether trait data may take continuous or discrete values. Defaults to
<code>FALSE</code> (all traits continuous). A single logical value or a logical
vector with length equal to the number of columns in traits.</p></td>
    </tr>
    <tr>
      <th>circular</th>
      <td><p>whether trait data are circular (e.g., hours or angles). Defaults to
<code>FALSE</code> (all traits non-circular). A single logical value or a logical
vector with length equal to the number of columns in traits.</p></td>
    </tr>
    <tr>
      <th>normal</th>
      <td><p>if TRUE, the area under all density functions is normalized to 1,
if FALSE, the area under all density functions is proportional to the number of
observations in that group.</p></td>
    </tr>
    <tr>
      <th>output</th>
      <td><p>specifies whether median or mean is calculated.</p></td>
    </tr>
    <tr>
      <th>weight_type</th>
      <td><p>specifies weights to be used to calculate the median or mean.</p></td>
    </tr>
    <tr>
      <th>randomize_weights</th>
      <td><p>If TRUE, randomize weights given to pairwise overlaps
within a community. This can be used to generate null models.</p></td>
    </tr>
    <tr>
      <th>unique_values</th>
      <td><p>Vector of all possible discrete values that <code>traits</code>
can take. Only used if <code>discrete = TRUE</code> and <code>circular = TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>circular_args</th>
      <td><p>optional list of additional arguments to pass to
<code><a href='https://rdrr.io/pkg/circular/man/circular.html'>circular</a></code>. Only used if <code>circular = TRUE</code> and
<code>discrete = FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>density_args</th>
      <td><p>list of additional arguments to be passed to
<code><a href='https://rdrr.io/r/stats/density.html'>density</a></code> if univariate, or
<code><a href='https://rdrr.io/pkg/hypervolume/man/hypervolume.html'>hypervolume</a></code> if multivariate.</p></td>
    </tr>
    <tr>
      <th>hypervolume_set_args</th>
      <td><p>list of additional arguments to be passed to
<code><a href='https://rdrr.io/pkg/hypervolume/man/hypervolume_set.html'>hypervolume_set</a></code>. Used only in multivariate case.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns overall species overlap for a community. At default, it returns the
median of pairwise overlaps weighted by harmonic means of abundances for the community.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function evaluates weighted mean or median of overlaps of density
estimates of all species in a community taking complete cases with species abundances
greater than 1 from the dataset. The default calculates the median of pairwise overlaps
for the whole community using the harmonic means of abundances of the species pairs as
weights, which minimizes the effect of outliners and rare species.If the argument
weight_type = "none", no weights are used for the calculation of mean/median. If
weight_type = "mean", arithmetic means of abundances are used as weights. To change the
output to mean, specify the argument output = "mean".</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Read, Q. D. et al. Among-species overlap in rodent body size
  distributions predicts species richness along a temperature gradient.
  Ecography 41, 1718-1727 (2018).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>Ostats</span><span class='op'>)</span>

<span class='co'># Keep only the relevant part of small mammal data</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>small_mammal_data</span><span class='op'>[</span><span class='va'>small_mammal_data</span><span class='op'>$</span><span class='va'>siteID</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'HARV'</span>,<span class='st'>'JORN'</span><span class='op'>)</span>, <span class='op'>]</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>dat</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>weight</span><span class='op'>)</span>, <span class='op'>]</span>
<span class='va'>dat</span><span class='op'>$</span><span class='va'>log_weight</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log10</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>weight</span><span class='op'>)</span>

<span class='co'># Calculate median of pairwise overlaps for the community,weighted by harmonic means</span>
<span class='co'># of abundances</span>
<span class='fu'>community_overlap</span><span class='op'>(</span>traits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>log_weight</span><span class='op'>)</span>,
   sp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>$</span><span class='va'>taxonID</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 0.08380215</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Quentin D. Read, Arya Yue, Isadora E. Fluck, Benjamin Baiser, John M. Grady, Phoebe L. Zarnetske, Sydne Record.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


